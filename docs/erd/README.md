# OnlineBook ”®–≥”©–≥–¥–ª–∏–π–Ω –°–∞–Ω–∏–π–Ω –ë“Ø—Ç—ç—Ü (ERD)

## –¢–æ–π–º

–≠–Ω—ç –±–∞—Ä–∏–º—Ç –±–∏—á–∏–≥ –Ω—å OnlineBook –≤–µ–± –∞–ø–ø–ª–∏–∫–µ–π—à–Ω—ã ”©–≥”©–≥–¥–ª–∏–π–Ω —Å–∞–Ω–∏–π–Ω –±“Ø—Ç—Ü–∏–π–≥ (Entity Relationship Diagram - ERD) —Ö–∞—Ä—É—É–ª–∂ –±–∞–π–Ω–∞. ERD –Ω—å Laravel migration —Ñ–∞–π–ª—É—É–¥–∞–∞—Å “Ø“Ø—Å–≥—ç–≥–¥—Å—ç–Ω –±”©–≥”©”©–¥ —Å–∏—Å—Ç–µ–º–∏–π–Ω –±“Ø—Ö —Ö“Ø—Å–Ω—ç–≥—Ç –±–æ–ª–æ–Ω —Ç—ç–¥–≥—ç—ç—Ä–∏–π–Ω —Ö–æ–æ—Ä–æ–Ω–¥—ã–Ω —Ö–æ–ª–±–æ–æ–≥ —Ö–∞—Ä—É—É–ª–Ω–∞.

## –î–∏–∞–≥—Ä–∞–º

![OnlineBook Database ERD](onlinebook-erd.svg)

## –•“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥

### “Æ–Ω–¥—Å—ç–Ω –ê–ø–ø–ª–∏–∫–µ–π—à–Ω—ã –•“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥

#### 1. **authors** (–ó–æ—Ö–∏–æ–ª—á)
–ù–æ–º—ã–Ω –∑–æ—Ö–∏–æ–ª—á–¥—ã–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —Ö–∞–¥–≥–∞–ª–Ω–∞.

**–ì–æ–ª —Ç–∞–ª–±–∞—Ä—É—É–¥:**
- `id` - “Æ–Ω–¥—Å—ç–Ω —Ç“Ø–ª—Ö“Ø“Ø—Ä (Primary Key)
- `name` - –ó–æ—Ö–∏–æ–ª—á–∏–π–Ω –Ω—ç—Ä (—à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π)
- `slug` - URL-–¥ –∑–æ—Ä–∏—É–ª—Å–∞–Ω –¥–∞–≤—Ç–∞–≥–¥–∞—à–≥“Ø–π –Ω—ç—Ä (UNIQUE)
- `email` - –ò–º—ç–π–ª —Ö–∞—è–≥ (UNIQUE, nullable)
- `nationality` - “Æ–Ω–¥—ç—Å —É–≥—Å–∞–∞
- `birth_date`, `death_date` - –¢”©—Ä—Å”©–Ω –±–æ–ª–æ–Ω –Ω–∞—Å –±–∞—Ä—Å–∞–Ω –æ–≥–Ω–æ–æ
- `biography` - –¢–æ–≤—á –Ω–∞–º—Ç–∞—Ä
- `deleted_at` - –ó”©”©–ª”©–Ω —É—Å—Ç–≥–∞—Ö (soft delete)

#### 2. **books** (–ù–æ–º)
–ù–æ–º—É—É–¥—ã–Ω “Ø–Ω–¥—Å—ç–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —Ö–∞–¥–≥–∞–ª–Ω–∞.

**–ì–æ–ª —Ç–∞–ª–±–∞—Ä—É—É–¥:**
- `id` - “Æ–Ω–¥—Å—ç–Ω —Ç“Ø–ª—Ö“Ø“Ø—Ä
- `author_id` - –ó–æ—Ö–∏–æ–ª—á–∏–π–Ω ID (nullable, logical FK)
- `title` - –ù–æ–º—ã–Ω –≥–∞—Ä—á–∏–≥ (—à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π)
- `category` - –ê–Ω–≥–∏–ª–∞–ª
- `cover_image` - –•–∞–≤—Ç–∞—Å–Ω—ã –∑—É—Ä–∞–≥
- `published_date` - –•—ç–≤–ª—ç–≥–¥—Å—ç–Ω –æ–≥–Ω–æ–æ
- `price` - “Æ–Ω—ç (–∞–Ω—Ö–¥–∞–≥—á —É—Ç–≥–∞: 0)
- `pages` - –•—É—É–¥–∞—Å–Ω—ã —Ç–æ–æ
- `description` - –¢–∞–π–ª–±–∞—Ä (longtext)
- `author` - –ó–æ—Ö–∏–æ–ª—á–∏–π–Ω –Ω—ç—Ä–∏–π–Ω snapshot (–±–∞–≥—Ç–∞–∞—Å–∞–Ω —É—Ç–≥–∞)

#### 3. **users** (–•—ç—Ä—ç–≥–ª—ç–≥—á)
–°–∏—Å—Ç–µ–º–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —Ö–∞–¥–≥–∞–ª–Ω–∞.

**–ì–æ–ª —Ç–∞–ª–±–∞—Ä—É—É–¥:**
- `id` - “Æ–Ω–¥—Å—ç–Ω —Ç“Ø–ª—Ö“Ø“Ø—Ä
- `name` - –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –Ω—ç—Ä
- `email` - –ò–º—ç–π–ª —Ö–∞—è–≥ (UNIQUE)
- `password` - –ù—É—É—Ü “Ø–≥ (nullable - –Ω–∏–π–≥–º–∏–π–Ω —Å“Ø–ª–∂—ç—ç–≥—ç—ç—Ä –Ω—ç–≤—Ç—Ä—ç—Ö “Ø–µ–¥)
- `role` - –≠—Ä—Ö (–∞–Ω—Ö–¥–∞–≥—á: 'user')
- `provider`, `provider_id` - –ù–∏–π–≥–º–∏–π–Ω —Å“Ø–ª–∂—ç—ç–≥—ç—ç—Ä –Ω—ç–≤—Ç—Ä—ç—Ö –º—ç–¥—ç—ç–ª—ç–ª
- `last_read_book_id` - –°“Ø“Ø–ª–¥ —É–Ω—à—Å–∞–Ω –Ω–æ–º—ã–Ω ID (FK)
- `last_read_at` - –°“Ø“Ø–ª–¥ —É–Ω—à—Å–∞–Ω —Ü–∞–≥

### –°–∏—Å—Ç–µ–º–∏–π–Ω –•“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥

#### 4. **settings** (–¢–æ—Ö–∏—Ä–≥–æ–æ)
–°–∏—Å—Ç–µ–º–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ–≥ —Ö–∞–¥–≥–∞–ª–∞—Ö —Ö“Ø—Å–Ω—ç–≥—Ç.

#### 5. **jobs** (–ê–∂–ª—ã–Ω –î–∞—Ä–∞–∞–ª–∞–ª)
Laravel queue —Å–∏—Å—Ç–µ–º–∏–π–Ω –∞–∂–ª—É—É–¥—ã–≥ —Ö–∞–¥–≥–∞–ª–Ω–∞.

#### 6. **job_batches** (–ê–∂–ª—ã–Ω –ë–∞–≥—Ü)
–ë–∞–≥—Ü–∞–ª—Å–∞–Ω –∞–∂–ª—É—É–¥—ã–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —Ö–∞–¥–≥–∞–ª–Ω–∞.

#### 7. **failed_jobs** (–ê–º–∂–∏–ª—Ç–≥“Ø–π –ê–∂–∏–ª)
–ê–º–∂–∏–ª—Ç–≥“Ø–π –±–æ–ª—Å–æ–Ω –∞–∂–ª—É—É–¥—ã–Ω –ª–æ–≥.

## –•“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥–∏–π–Ω –•–æ–æ—Ä–æ–Ω–¥—ã–Ω –•–æ–ª–±–æ–æ

### 1. authors ‚Üî books (–ó–æ—Ö–∏–æ–ª—á - –ù–æ–º)
- **–•–∞—Ä—å—Ü–∞–∞:** –ù—ç–≥ –∑–æ—Ö–∏–æ–ª—á –æ–ª–æ–Ω –Ω–æ–º—Ç–æ–π —Ö–æ–ª–±–æ–≥–¥–æ–∂ –±–æ–ª–Ω–æ (1:N)
- **–¢—ç–º–¥—ç–≥–ª—ç–ª:** –≠–Ω—ç –Ω—å **–ª–æ–≥–∏–∫ —Ö–æ–ª–±–æ–æ** –±”©–≥”©”©–¥ ”©–≥”©–≥–¥–ª–∏–π–Ω —Å–∞–Ω–¥ `books.author_id` —Ç–∞–ª–±–∞—Ä –Ω—å `authors.id`-–≥ –∑–∞–∞–¥–∞–≥ –±–æ–ª–æ–≤—á **foreign key constraint –±–∞–π—Ö–≥“Ø–π**. –£—á–∏—Ä –Ω—å `books.author` —Ç–∞–ª–±–∞—Ä –Ω—å –∑–æ—Ö–∏–æ–ª—á–∏–π–Ω –Ω—ç—Ä–∏–π–≥ snapshot —Ö—ç–ª–±—ç—Ä—ç—ç—Ä —Ö–∞–¥–≥–∞–ª–¥–∞–≥.

### 2. users ‚Üî books (–•—ç—Ä—ç–≥–ª—ç–≥—á - –ù–æ–º)
- **–•–∞—Ä—å—Ü–∞–∞:** –•—ç—Ä—ç–≥–ª—ç–≥—á —Å“Ø“Ø–ª–¥ —É–Ω—à—Å–∞–Ω –Ω–æ–º—Ç–æ–π —Ö–æ–ª–±–æ–≥–¥–æ–Ω–æ (0..1:1)
- **–¢—ç–º–¥—ç–≥–ª—ç–ª:** –≠–Ω—ç –Ω—å **–±–æ–¥–∏—Ç foreign key** –±”©–≥”©”©–¥ `ON DELETE SET NULL` –≥–æ—Ä–∏–º—Ç–æ–π –∞–∂–∏–ª–ª–∞–¥–∞–≥. –ù–æ–º —É—Å—Ç–∞—Ö “Ø–µ–¥ —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω `last_read_book_id` –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä NULL –±–æ–ª–Ω–æ.

### 3. –°–∏—Å—Ç–µ–º–∏–π–Ω —Ö“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥
- `jobs`, `job_batches`, `failed_jobs`, `settings` —Ö“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥ –Ω—å –±—É—Å–∞–¥ –∞–ø–ø–ª–∏–∫–µ–π—à–Ω—ã —Ö“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥—Ç—ç–π —à—É—É–¥ —Ö–æ–ª–±–æ–æ–≥“Ø–π.
- –≠–¥–≥—ç—ç—Ä –Ω—å Laravel-—ã–Ω queue —Å–∏—Å—Ç–µ–º –±–æ–ª–æ–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ–≥ –¥—ç–º–∂–∏—Ö —Å–∏—Å—Ç–µ–º–∏–π–Ω —Ö“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥ —é–º.

## –î–∏–∞–≥—Ä–∞–º—ã–≥ –•—ç—Ä—Ö—ç–Ω –®–∏–Ω—ç—á–ª—ç—Ö

### 1. Mermaid –≠—Ö –§–∞–π–ª—ã–≥ –ó–∞—Å–∞—Ö

ERD-–∏–π–Ω —ç—Ö –∫–æ–¥ –Ω—å Mermaid —Ö—ç–ª—ç—ç—Ä –±–∏—á–∏–≥–¥—Å—ç–Ω –±”©–≥”©”©–¥ `onlinebook-erd.mmd` —Ñ–∞–π–ª–¥ –±–∞–π—Ä–ª–∞–¥–∞–≥.

```bash
# Mermaid —Ñ–∞–π–ª—ã–≥ –∑–∞—Å–∞—Ö
nano docs/erd/onlinebook-erd.mmd
```

### 2. SVG “Æ“Ø—Å–≥—ç—Ö

Mermaid —Ñ–∞–π–ª–∞–∞—Å SVG “Ø“Ø—Å–≥—ç—Ö–∏–π–Ω —Ç—É–ª–¥:

**–°–æ–Ω–≥–æ–ª—Ç 1: Mermaid CLI –∞—à–∏–≥–ª–∞—Ö**
```bash
# Mermaid CLI-–≥ —Å—É—É–ª–≥–∞—Ö (—Ö—ç—Ä—ç–≤ –±–∞–π—Ö–≥“Ø–π –±–æ–ª)
npm install -g @mermaid-js/mermaid-cli

# SVG “Ø“Ø—Å–≥—ç—Ö
mmdc -i docs/erd/onlinebook-erd.mmd -o docs/erd/onlinebook-erd.svg -t neutral -b transparent
```

**–°–æ–Ω–≥–æ–ª—Ç 2: –û–Ω–ª–∞–π–Ω —Ö—ç—Ä—ç–≥—Å—ç–ª –∞—à–∏–≥–ª–∞—Ö**
- [Mermaid Live Editor](https://mermaid.live/) —Ä—É—É –æ—á–∏–∂ `.mmd` —Ñ–∞–π–ª—ã–Ω –∞–≥—É—É–ª–≥—ã–≥ paste —Ö–∏–π–∂ SVG —Ç–∞—Ç–∞–∂ –∞–≤–∞—Ö
- [Mermaid Chart](https://www.mermaidchart.com/) - –∏–ª“Ø“Ø –æ–ª–æ–Ω –±–æ–ª–æ–º–∂—Ç–æ–π –æ–Ω–ª–∞–π–Ω —Ö—ç—Ä—ç–≥—Å—ç–ª

**–°–æ–Ω–≥–æ–ª—Ç 3: –ì–∞—Ä–∞–∞—Ä –∑–∞—Å–∞—Ö**
- SVG —Ñ–∞–π–ª—ã–≥ —à—É—É–¥ –∑–∞—Å–∞–∂ –±–æ–ª–Ω–æ (–∂–∏—à—ç—ç: ”©–Ω–≥”©, –∑—É—Ä–∞–∞—Å–Ω—ã –±–∞–π—Ä—à–∏–ª –≥.–º.)

### 3. PNG –•—É–≤–∏–ª–±–∞—Ä “Æ“Ø—Å–≥—ç—Ö (–Ω—ç–º—ç–ª—Ç)

PNG —Ñ–∞–π–ª —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –±–æ–ª:

```bash
# SVG-—ç—ç—Å PNG —Ä—É—É —Ö”©—Ä–≤“Ø“Ø–ª—ç—Ö
mmdc -i docs/erd/onlinebook-erd.mmd -o docs/erd/onlinebook-erd.png -t neutral -b transparent
```

–≠—Å–≤—ç–ª –æ–Ω–ª–∞–π–Ω —Ö”©—Ä–≤“Ø“Ø–ª—ç–≥—á –∞—à–∏–≥–ª–∞—Ö: [CloudConvert](https://cloudconvert.com/svg-to-png)

## Migration –§–∞–π–ª—É—É–¥—ã–Ω –ñ–∞–≥—Å–∞–∞–ª—Ç

–≠–Ω—ç ERD –Ω—å –¥–∞—Ä–∞–∞—Ö –∏–¥—ç–≤—Ö—Ç—ç–π migration —Ñ–∞–π–ª—É—É–¥–∞–¥ “Ø–Ω–¥—ç—Å–ª—ç—Å—ç–Ω:

- `database/migrations/2025_10_10_074729_create_books_table.php`
- `database/migrations/2025_10_10_080000_add_author_fk_to_books_table.php`
- `database/migrations/2025_11_08_000000_create_author_table.php`
- `database/migrations/2025_12_25_035106_add_social_fields_to_users_table.php`
- `database/migrations/2025_12_29_000100_add_last_read_to_users_table.php`
- `database/migrations/0001_01_01_000002_create_jobs_table.php`
- `database/migrations/2025_10_10_063420_add_role_to_users_table.php`
- `database/migrations/2025_10_10_074819_create_settings_table.php`

**–ê–Ω—Ö–∞–∞—Ä:** `.history/` —Ñ–æ–ª–¥–µ—Ä –±–æ–ª–æ–Ω `book_categories` —Ö“Ø—Å–Ω—ç–≥—Ç–∏–π–Ω migration (`2025_10_30_081000_create_book_categories_table.php`) –Ω—å –±—É—Ä—É—É —Ç—É–ª –æ—Ä—É—É–ª–∞–∞–≥“Ø–π.

## –ù—ç–º—ç–ª—Ç –ú—ç–¥—ç—ç–ª—ç–ª

### –¢“Ø–ª—Ö“Ø“Ø—Ä –¢—ç–º–¥—ç–≥–ª—ç–≥—ç—ç
- üîë - Primary Key (“Æ–Ω–¥—Å—ç–Ω —Ç“Ø–ª—Ö“Ø“Ø—Ä)
- üîí - Required/UNIQUE (–®–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π/–î–∞–≤—Ç–∞–≥–¥–∞—à–≥“Ø–π)
- ‚ÜóÔ∏è - Foreign Key (–ì–∞–¥–∞–∞–¥ —Ç“Ø–ª—Ö“Ø“Ø—Ä)

### –•–æ–ª–±–æ–æ–Ω—ã –¢—ç–º–¥—ç–≥–ª—ç–≥—ç—ç
- `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ` - Enforced FK (–•“Ø—á—ç—ç—Ä –¥–∞–≥—É—É–ª—Å–∞–Ω –≥–∞–¥–∞–∞–¥ —Ç“Ø–ª—Ö“Ø“Ø—Ä)
- `- - - - -` - Logical (–õ–æ–≥–∏–∫ —Ö–æ–ª–±–æ–æ, constraint –±–∞–π—Ö–≥“Ø–π)
- `‚óã‚îÄ‚îÄ‚îÄ‚îÄ` - Optional/Nullable (–ó–∞–∞–≤–∞–ª –±–∏—à)

## –ê—Å—É—É–ª—Ç, –°–∞–Ω–∞–ª

–•—ç—Ä—ç–≤ –¥–∏–∞–≥—Ä–∞–º–¥ ”©”©—Ä—á–ª”©–ª—Ç —Ö–∏–π—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –±–æ–ª:
1. Migration —Ñ–∞–π–ª—ã–≥ —à–∏–Ω—ç—á–ª—ç—Ö
2. `docs/erd/onlinebook-erd.mmd` —Ñ–∞–π–ª—ã–≥ —à–∏–Ω—ç—á–ª—ç—Ö
3. SVG –¥–∞—Ö–∏–Ω “Ø“Ø—Å–≥—ç—Ö
4. Git-–¥ –æ—Ä—É—É–ª–∞—Ö

---

*–°“Ø“Ø–ª–¥ —à–∏–Ω—ç—á–∏–ª—Å—ç–Ω: 2026-02-01*
